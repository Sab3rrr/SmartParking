# 智慧社区停车场服务项目指导书

## 一、项目简介

### 项目背景

传统社区停车场在车辆管理中存在数据管理混乱（业主信息易被篡改）、外来车辆登记低效（信息格式不统一）、缴费流程繁琐等问题。
本项目聚焦 “数据安全 + 高效管理 + 便捷服务”，
通过 Python 后端技术实现业主 / 外来车辆信息安全登记、车牌自动识别通行、线上缴费及消息通知全流程可视化操作，
核心解决 “数据不可篡改”“信息标准化”“服务自动化” 三大痛点。

### 核心目标

1. 数据安全：通过@property装饰器实现业主 / 外来车辆核心信息（身份证、车牌号等）只读保护，防止恶意篡改；
2. 管理高效：业主车牌一次登记永久生效，外来车辆信息标准化登记，识别效率提升 60%；
3. 服务便捷：支持线上缴费与多渠道消息通知，车主操作流程简化 70%。

### 核心功能

#### 1. 业主车牌号登记：

收集业主用户名、身份证号、手机号、车牌号，通过@property装饰器确保核心信息（身份证、车牌号）只读，仅支持通过指定接口更新；

#### 2. 业主车辆：

识别车牌后匹配登记信息，直接开闸放行；

#### 3. 外来车辆：

识别车牌后触发信息登记（同业主字段），登记完成后放行，信息同样受@property保护；

#### 4. 车费线上缴费：

基于停车时长自动计费，支持微信 / 支付宝支付接口对接，生成支付订单与电子凭证；

#### 5. 消息通知：

入场提醒、超时预警、缴费成功等事件通过短信 / 微信模板消息推送，记录通知状态。

## 二、技术栈与工具清单

| 类别     | 	技术 / 工具            | 	用途说明                                             |
|--------|---------------------|---------------------------------------------------|
| 后端框架   | 	Python 3.9+        | 	写居民类，实现业务相关逻辑                                    |
| 数据验证   | 	Pydantic           | 	定义数据模型（业主 / 车辆信息），实现字段格式校验（如手机号 11 位、身份证规则），     |
| 数据存储   | 	JSON 模块            | 将居民信息转化为json模块                                    |
| 数据库    | 	SQLite             | 	存储业主 / 外来车辆信息，支持快速查询与更新                          |
| SQL语句  | 	SQLite 语法          | 	编写数据库查询语句，实现数据检索与更新                              |
| 测试框架   | 	unittest           | 	编写单元测试用例，覆盖数据模型、API 接口、业务逻辑                      |
| 设备通信   | 	paho-mqtt          | 	对接摄像头设备，接收车牌识别图像 / 结果（MQTT 协议）                   |
| 支付集成   | 	微信支付 SDK + 支付宝 SDK | 	处理支付订单创建、回调通知、支付状态查询                             |
| 消息推送   | 	阿里云短信 API + 微信模板消息 | 	发送入场、缴费、超时等通知                                    |
| GUI框架  | Tkinter             | 	实现简单的用户界面，包括业主登记、外来车辆登记、支付查询等功能。                 |
| 架构模式   | MVC（模型 - 视图 - 控制器）  | 	将项目分为数据层（模型）、业务逻辑层（控制器）、用户交互层（视图），各模块独立开发、测试、维护。 |
| 界面设计辅助 | Figma / 画图工具        | 绘制界面原型 / 支付界面                                     |
| 开发工具   | 	pycharm社区版 + Git   | 	代码开发与版本控制                                        |

开发环境搭建、居民数据模型、数据库操作、GUI 界面开发、支付管理、消息通知模块，
核心目标是 “全生命周期管理（发布 - 查询 - 删除）、判断外来车辆、支付管理、公告可视化” 三大核心能力.

## 三、系统架构

系统采用 MVC 架构模式，将项目分为数据层（模型）、业务逻辑层（控制器）、用户交互层（视图），各模块独立开发、测试、维护。
界面设计：

- 业主界面：包括车辆登记、查询、删除、支付查询等功能；
- 外来车辆界面：包括登记、查询、删除、支付查询等功能；
- 公告可视化界面：展示小区公告、交通规则等信息。

## 四、小组分工

| 角色             | 人员     | 主要职责                                                                                                                                                                                                                                                                                                                                                     |
|----------------|--------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 项目经理           | 蔡佑俊    | 1. 结合车辆管理系统需求（全生命周期管理、支付流程、消息通知），制定项目开发计划，明确“业主/外来车辆管理”“支付对接”等里程碑，管控进度风险；<br/><br/>2. 对接小区物业、支付平台（如微信支付），调研业务细节（如计费标准、通知模板），输出需求规格说明书，界定数据安全标准（如车牌/手机号加密存储）；<br/>3. 协调前后端、数据库、支付接口等资源，解决跨模块冲突（如入场登记与车位查询联动），确保流程闭环。                                                                                                                                      | 
| 后端开发工程师(技术架构师) | 肖子洋    | 1. 设计系统技术架构（MVC模式），划分数据层（车辆/用户模型）、业务层（入场判断/费用计算）、接口层（支付/通知API），保障高并发场景（如早晚高峰入场）稳定性；<br/>2. 开发核心逻辑：<br/>   - 车辆类型判断（业主/外来）、车位状态监测与预警通知逻辑；<br/>   - 支付管理模块（业主账户扣费、外来车辆微信支付对接、订单生成与回调处理）；<br/>   - 全生命周期管理（车辆登记/查询/删除接口、数据持久化）；<br/>3. 设计数据库表结构（用户表、车辆表、订单表、公告表），优化查询性能（如车牌快速匹配），实现敏感数据加密存储；<br/>4. 开发消息通知接口（短信/小程序推送），对接第三方服务（如短信平台），确保“车库已满”“支付成功”等通知实时性。 |
| 前端开发工程师        | 向武杰    | 1. 设计多角色界面：<br/>   - 业主界面（车辆登记/查询/删除、余额查询、公告查看）；<br/>   - 外来车辆登记界面（小程序表单、支付二维码展示）；<br/>   - 公告可视化界面（滚动公告、交通规则图文展示）；<br/>2. 开发响应式页面，实现车位状态统计、支付记录可视化；<br/>3. 对接后端API：实时展示车位状态、同步车辆登记信息、触发支付流程，处理异常提示（如“车位已满”弹窗）；<br/>4. 优化用户体验：简化登记流程、支付页面加载速度，确保移动端适配（外来车辆小程序场景）。                                                                                        | 
| 物联网开发工程师(设备对接) | 冶成贵    | 1. 对接摄像头设备，开发车牌识别接口（或集成第三方API），实现入场/离场车牌自动识别与解析；<br/>2. 开发道闸控制模块，基于TCP/IP协议接收后端“放行/禁止”指令，联动硬件执行开关动作；<br/>3. 实现车位状态监测：对接车位传感器，实时采集空/满状态，通过MQTT协议同步至后端，确保数据延迟≤1秒；<br/>4. 调试设备通信稳定性，处理异常场景（如摄像头离线告警、传感器误报），保障入场识别流程不中断。                                                                                                                                     | 
| 测试工程师          | 黄俊（组长） | 1. 设计测试用例：覆盖核心流程（业主入场/离场、外来车辆登记-支付-放行）、异常场景（车位满时登记、支付失败重试）、数据安全（敏感信息加密）；<br/>2. 开发自动化测试脚本，模拟高并发入场请求，验证系统稳定性；<br/>3. 测试支付流程：对接微信支付沙箱环境，验证订单生成、支付回调、通知触发的完整性；<br/>                                                                                                                                                                                         |

## 五、业务流程

#### 1. 业主车辆：

- 业主在小区入口填写个人信息（用户名、身份证号、手机号、车牌号），提交后系统登记；
- 后续车主直接使用该车牌号进入，无需重复登记；
- 车主可以在小区内任何时间查询自己的信息（如余额、最近一次缴费时间）。
- 如果车库有存满消息，将会通过手机号发送给业主”车库已满“。

#### 2. 外来车辆：

- 外来车辆到达入口，摄像头推送车牌图像，调用车牌识别 API 获取车牌号；
- 如果是非居民车辆→触发外来车辆登记（车主通过小程序填写信息）；
- 将登记信息存入，记录入场时间发送入场提醒（含免费时长）；
- 车辆离场时，创建订单，调用计算费用→对接微信支付生成支付链接；
- 车主完成支付→支付平台回调的回调接口→ “已支付”；
- 发送缴费成功通知→道闸放行；
- 如果车库有存满消息，将会通过手机号发送给业主”车库已满“。

## 六、技术亮点

1. 数据安全：通过@property装饰器实现核心信息（身份证、车牌号）只读，防止恶意篡改；
2. 标准化验证：Pydantic 模型强制校验字段格式，确保数据规范；
3. 模块化设计：各模块低耦合（如paid模块可独立对接新支付渠道），便于扩展；
4. 全流程自动化：从车辆识别到缴费通知全线上化，减少人工干预。

通过以上设计，项目可实现智慧社区停车服务的高效管理，提升居民体验与物业效率。